{%extends "base.html" %}
{% load crispy_forms_tags %}
{% load static %}


{% block head_title%}{{title}}{%endblock%}
{% block content %}

{% if request.user.is_superuser %}
<div class='row'>
	<div class='col-lg-12 md-padding'>

  		<div class='sm-padding'>
  			<a href="{% url 'addUser' %}"><button type="button" class="btn btn-success btn-sm">Cadastrar novo</button></a>
  			<form id="formRemove" method='POST' action='{% url 'removeList' title %}' enctype="multipart/form-data">
  				{% csrf_token%}
	            <input type="submit" id="btExcluir" class="btn btn-default btn-sm" value="Excluir">
	        </form>
  		
   		</div>

    	<table class="table table-striped table-bordered text-center">
	    	<thead>
	    		<th><input class="checkHeader" type="checkbox" value=""></th>  
        		<th>ID</th>
        		<th>Usuário</th>
        		<th>Nome</th>
        		<th>Email</th>
        		<th>Notificação</th>
        		<th>Admin</th>
        		<th>Cadastro em</th>
        		<th>Último acesso em</th>
	      	</thead>
	      	
	      	<tbody id="tableSel">
	    	{% for appUsuario in data %}
		    	<tr>
		    		<td><input type="checkbox" value="{{appUsuario.usuario.id}}"></td>
		          	<td>{{appUsuario.usuario.id}}</td>
		          	<td><a href="{% url 'seeUser' appUsuario appUsuario.usuario %}">{{appUsuario.usuario.username}}</a></td>
		          	<td>{{appUsuario.nickname}}</td>
		          	<td>{{appUsuario.usuario.email}}</td>
		          	<td>{{appUsuario.notification}}</td>
		          	<td>{{appUsuario.usuario.is_staff}}</td>
		          	<td>{{appUsuario.usuario.date_joined |date:"d M Y"}}</td>
		          	<td>{{appUsuario.usuario.last_login|date:"d M Y"}}</td>
		        </tr>
	    	{% endfor %}
	    	</tbody>
    	</table>

	    <nav>
	      <ul class="nav navbar-nav navbar-left">
	        <ul class="pagination">
	          {% if data.has_previous %}
	          <li>
	            <a href="?page={{ data.previous_page_number }}" aria-label="Previous">
	              <span aria-hidden="true">&laquo;</span>
	            </a>
	          </li> 
	          {% else %}
	          <li class="disabled">
	            <span aria-hidden="true">&laquo;</span>
	          </li>
	          {% endif %}

	          {% for page, value in pagesIndex.items %}
	              {% if value > 0 %}
	                {% if page == 2 %}
	                <li class='active'><a href="#">{{value}}</a></li>
	                {%else%}
	                <li><a href="?page={{value}}">{{value}}</a></li>
	                {% endif %}
	              {%endif%}
	          {% endfor %}

	          
	          {% if data.has_next %}
	          <li>
	            <a href="?page={{ data.next_page_number }}" aria-label="Next">
	              <span aria-hidden="true">&raquo;</span>
	            </a>
	          {% else %}
	          <li class="disabled">
	            <span aria-hidden="true">&raquo;</span>
	          {% endif %}
	          </li>
	          
	        </ul>
	      </ul>
	    </nav>

	</div>
</div>

{% else %}

<div class='row'>
Não possui acesso
</div>

{% endif %}

{% endblock %}